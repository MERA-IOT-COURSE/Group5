<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head></head>
<body>
<script type="text/javascript">
    function setElementInnerTest(elementId, value) {
        document.getElementById(elementId).innerText = value;
    }

    let sendGet = function (url, callback) {
        let request = new XMLHttpRequest();
        request.open("GET", url);
        request.onreadystatechange = function () {
            if (request.readyState === 4) {
                callback.call(this, request.responseText);
            }
        };
        request.send();
    };

    var sendOnRequest = () => sendGet("http://127.0.0.1:3000/on");
    var sendOffRequest = () => sendGet("http://127.0.0.1:3000/off");

    var sendTemperatureRequest =
        () => sendGet(
            "http://127.0.0.1:3000/temperature",
            value => setElementInnerTest('temperature', value)
        );

    var sendHumidityRequest =
        () => sendGet(
            "http://127.0.0.1:3000/humidity",
            value => setElementInnerTest('humidity', value)
        );
</script>

<div>
    <input type="submit" value="On" onclick="sendOnRequest()">
    <input type="submit" value="Off" onclick="sendOffRequest()">
</div>

<div>
    <!--todo: add labels-->
    <p>
        <span id='temperature'></span>
        <input type="submit" value='Temperature' onclick="sendTemperatureRequest()">
    </p>

    <p>
        <span id='humidity'></span>
        <input type="submit" value='Humidity' onclick="sendHumidityRequest()">
    </p>
</div>
</body>
</html>
